<!DOCTYPE html>
<html lang="az">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BSU Chat - Fak√ºlt…ô Otaqlarƒ±</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body class="chat-page">
    <header class="chat-header">
        <div class="chat-header-left">
            <div class="chat-logo">üéì</div>
            <div class="chat-title">
                <h1>BSU Chat</h1>
                <p id="user-info">Y√ºkl…ônir...</p>
            </div>
        </div>
        <div class="chat-header-right">
            <div class="header-icon" onclick="showRulesModal()" title="Qaydalar">üìú</div>
            <div class="header-icon" onclick="showProfileModal()" title="Profil">üë§</div>
            <button class="logout-btn" onclick="logout()">√áƒ±xƒ±≈ü</button>
        </div>
    </header>
    
    <div class="daily-topic" id="daily-topic">
        Y√ºkl…ônir...
    </div>
    
    <!-- Faculty Rooms View -->
    <div class="faculty-rooms" id="faculty-rooms-view">
        <h2>Fak√ºlt…ô otaqlarƒ±</h2>
        <div class="faculty-grid" id="faculty-grid"></div>
    </div>
    
    <!-- Chat Room View -->
    <div class="chat-room hidden" id="chat-room-view">
        <div class="chat-room-header">
            <button class="back-btn" onclick="backToFaculties()">‚Üê Geri</button>
            <h2 id="chat-room-title"></h2>
        </div>
        
        <div class="chat-messages" id="chat-messages"></div>
        
        <div class="chat-input-container">
            <div class="chat-input-wrapper">
                <textarea 
                    class="chat-input" 
                    id="message-input" 
                    placeholder="Mesajƒ±nƒ±zƒ± yazƒ±n..."
                    rows="1"
                    maxlength="1000"
                ></textarea>
                <button class="send-btn" id="send-btn" onclick="sendMessage()">üì§</button>
            </div>
        </div>
    </div>
    
    <!-- Private Chat View -->
    <div class="chat-room hidden" id="private-chat-view">
        <div class="chat-room-header">
            <button class="back-btn" onclick="backToGroupChat()">‚Üê Geri</button>
            <h2 id="private-chat-title"></h2>
        </div>
        
        <div class="chat-messages" id="private-messages"></div>
        
        <div class="chat-input-container">
            <div class="chat-input-wrapper">
                <textarea 
                    class="chat-input" 
                    id="private-message-input" 
                    placeholder="≈û…ôxsi mesaj yazƒ±n..."
                    rows="1"
                    maxlength="1000"
                ></textarea>
                <button class="send-btn" id="private-send-btn" onclick="sendPrivateMessage()">üì§</button>
            </div>
        </div>
    </div>
    
    <!-- Rules Modal -->
    <div id="rules-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üìú Qaydalar</h2>
                <span class="modal-close" onclick="closeRulesModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div id="rules-content"></div>
            </div>
        </div>
    </div>
    
    <!-- Profile Modal -->
    <div id="profile-modal" class="profile-modal">
        <div class="profile-modal-content">
            <div class="profile-header">
                <div class="profile-avatar-wrapper">
                    <div class="profile-avatar-large" id="profile-avatar-large"></div>
                </div>
                <h2 id="profile-fullname"></h2>
                <p id="profile-faculty"></p>
            </div>
            <div class="profile-body">
                <div class="avatar-upload-section">
                    <input type="file" id="avatar-file-input" accept="image/*" onchange="uploadAvatar()">
                    <button class="avatar-upload-btn" onclick="document.getElementById('avatar-file-input').click()">
                        üì∑ Profil ≈ü…ôkli y√ºkl…ô
                    </button>
                </div>
                
                <form id="profile-form">
                    <div class="form-group">
                        <label>Ad Soyad</label>
                        <input type="text" name="fullname" id="edit-fullname" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Fak√ºlt…ô</label>
                        <select name="faculty" id="edit-faculty" required></select>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>D…ôr…ôc…ô</label>
                            <select name="degree" id="edit-degree" required>
                                <option value="bakalavr">Bakalavr</option>
                                <option value="magistr">Magistr</option>
                                <option value="doktorantura">Doktorantura</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label>Kurs</label>
                            <select name="course" id="edit-course" required>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                            </select>
                        </div>
                    </div>
                    
                    <button type="submit" class="btn btn-primary btn-block">Yadda saxla</button>
                    <button type="button" class="btn btn-secondary btn-block" onclick="closeProfileModal()">L…ôƒüv et</button>
                </form>
            </div>
        </div>
    </div>
    
    <script src="/socket.io/socket.io.js"></script>
    <script src="/js/chat.js"></script>
</body>
</html>
